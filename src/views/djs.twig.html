{% extends "layout.default.twig.html" %}

{% block latest %}
<a href="{{ path('emission', {id:shows.0.id, type:shows.0.typeSlug}) }}">
  {{ shows.0.type }} {{ shows.0.number }} : {{ shows.0.authors }} - {{ shows.0.title }}
</a>
{% endblock %}

{% block title %}DJs ({{ djs|length }}){% endblock %}

{% block content %}
<div class="grid-100 mobile-grid-100">
    <h3>
        {% if app.request.get('type') %}
            <a href="{{ path('artists', { type: app.request.get('type') }) }}">{{ artists|length }} artistes</a>
            / <a href="{{ path('emissions', { type: app.request.get('type') }) }}">{{ shows|length }} émissions</a>
            / <a href="{{ path('djs', { type: app.request.get('type') }) }}">{{ djs|length }} djs</a>
        {% elseif app.request.get('authors') %}
            <a href="{{ path('artists', { authors: app.request.get('authors') }) }}">{{ artists|length }} artistes</a>
            / <a href="{{ path('emissions', { authors: app.request.get('authors') }) }}">{{ shows|length }} émissions</a>
            / <a href="{{ path('djs', { authors: app.request.get('authors') }) }}">{{ djs|length }} djs</a>
        {% else%}
            <a href="{{ path('artists') }}">{{ artists|length }} artistes</a>
            / <a href="{{ path('emissions') }}">{{ shows|length }} émissions</a>
            / <a href="{{ path('djs') }}">{{ djs|length }} djs</a>
        {% endif %}
    </h3>

    <ul>
    {% for authors, shows in showsByAuthors %}
        <li>
            <a href="{{ path('djs', { authors: authors }) }}">{{ authors }}</a>
            <ul>
            {% for show in shows %}
                <li class="{{ show.typeSlug }}">
                    <a href="{{ path('djs', { type: show.type }) }}">{{ show.type }}</a>
                    <a href="{{ path('emission', { id: show.id, type: show.typeSlug }) }}">{{ show.number }}</a>
                    :
                    <a href="{{ path('emissions', { authors: show.authors }) }}">{{ show.authors }}</a>
                    -
                    <a href="{{ path('emission', { id: show.id, type: show.typeSlug }) }}">{{ show.title }}</a>
                </li>
            {% endfor %}
            </ul>
        </li>
    {% endfor %}
    </ul>
</div>
{% endblock %}
